<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Yellow Brick Ring üåª</title>
    <link rel="stylesheet" href="/styles.css" />
    <link rel="stylesheet" href="/vendor/font-awesome/css/fontawesome.css" />
    <link rel="stylesheet" href="/vendor/font-awesome/css/all.min.css" />
    <script>
        // check if origin is not yellowbrickring.com, if so set window.yellowBrickRingApiUrl to origin
        if (window.location.origin !== 'https://yellowbrickring.com') {
            window.yellowBrickRingApiUrl = window.location.origin;
        }
    </script>
    <script src="./widget.js"></script>
</head>

<body>
    <header>
        <h1>üåª Yellow Brick Ring</h1>
        <p>A friendly webring for indie web builders, artists, hackers, and creative friends.</p>
        <a href="#submit" class="btn">Join the Ring</a>
    </header>

    <section>
        <h2>What is a Webring?</h2>
        <p>A webring is a circle of websites linked together, allowing visitors to explore cool, like-minded creators.
            It's decentralized, retro, and human.</p>
    </section>

    <section>
        <h2>üîó Live Widget Preview</h2>
        <webring-widget site-id="yellowbrickring.com"></webring-widget>
    </section>

    <section id="join">
        <h2>üåü Add to Your Site</h2>
        <p>To include the ring on your site, just copy and paste this snippet into your HTML:</p>
        <div class="code-block">
            <button class="copy-btn" title="Copy to clipboard"><i class="fa-solid fa-copy"></i></button>
            <pre><code>&lt;script src="https://yellowbrickring.com/widget.js" defer&gt;&lt;/script&gt;
&lt;webring-widget site-id="yourdomain.com"&gt;&lt;/webring-widget&gt;</code></pre>
        </div>
        <p>Make sure to replace <code>yourdomain.com</code> with your actual site ID (usually your domain).</p>
    </section>

    <section>
        <h2>üõ† Use the API (No JS Widget)</h2>
        <p>If you'd prefer not to use JavaScript, you can still participate in the Yellow Brick Ring by adding simple
            HTML links like this:</p>
        <div class="code-block">
            <button class="copy-btn" title="Copy to clipboard"><i class="fa-solid fa-copy"></i></button>
            <pre><code>&lt;a href="https://yellowbrickring.com/webring?from=yourdomain.com&amp;to=prev"&gt;‚Üê Prev&lt;/a&gt; |
&lt;strong&gt;Part of &lt;a href="https://yellowbrickring.com"&gt;Yellow Brick Ring&lt;/a&gt;&lt;/strong&gt; |
&lt;a href="https://yellowbrickring.com/webring?from=yourdomain.com&amp;to=next"&gt;Next ‚Üí&lt;/a&gt; |
&lt;a href="https://yellowbrickring.com/webring?from=yourdomain.com&amp;to=random"&gt;üé≤ Random&lt;/a&gt;</code></pre>
        </div>

        <p>Replace <code>yourdomain.com</code> with your actual site ID (usually your domain name). These links allow
            your visitors to move around the ring even if JavaScript is disabled.</p>
    </section>

    <section>
        <h2>üåê Browse the Ring</h2>
        <p>Check out all the amazing sites in the Yellow Brick Ring:</p>
        <ul id="site-list">
            <!-- Sites will be dynamically loaded here -->
        </ul>
        <a href="/sites.json" class="btn">Browse Sites</a>
    </section>

    <section id="submit">
        <h2>‚úçÔ∏è Submit Your Site</h2>
        <p>
            To join the ring, send us your site info below. All submissions are reviewed before being added.
        </p>
        <p>
            Just a heads up: To remain in the ring, your site needs to link up using the API or widget.
        </p>
        <a href="/submit" class="btn">Submit Your Site</a>
    </section>

    <section>
        <h2>üí¨ Join the Conversation</h2>
        <p>
            Have questions, need help, or just want to chat? Come hang out with us on Discord!
            It‚Äôs the best place to get support and connect with other folks in the ring.
        </p>
        <a href="https://buddypond.com/discord" class="btn" target="_blank" rel="noopener">Join Our Discord</a>
    </section>


    <footer>
        <p>Built with üåª by friends of the web | <a href="/sites.json">Browse Sites</a> | <a
                href="https://github.com/marak/yellowbrickring.com">Open-source</a></p>
    </footer>

    <script type="module">
        import yellowBrickRing from './yellowbrickring.js'

        const app = {}
        yellowBrickRing(app)

        // Example usage
        app.ring.getSites().then(sites => {
            const list = document.getElementById('site-list')
            sites.forEach(site => {
                const item = document.createElement('li')
                item.innerHTML = `<a href="${site.url}">${site.name}</a>`
                list.appendChild(item)
            })
        })
    </script>

    <ul id="site-list"></ul>
    <script>
        // when document is ready, load the sites
        document.addEventListener('DOMContentLoaded', async () => {
            document.querySelectorAll('.copy-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const code = button.nextElementSibling.querySelector('code').innerText;
                    navigator.clipboard.writeText(code).then(() => {
                        button.innerHTML = '<i class="fa-solid fa-check"></i>';
                        setTimeout(() => button.innerHTML = '<i class="fa-solid fa-copy"></i>', 1500);
                    });
                });
            });
        });
    </script>

</body>

</html>